<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
	<title>Leaflet extension for remote GeoJSON layers</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<!-- Leaflet kernel -->
	<link rel="icon" type="image/png" href="http://leafletjs.com/docs/images/favicon.ico" />
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

	<!-- Erictheise.rrose pluggin -->
	<link rel="stylesheet" href="http://erictheise.github.io/rrose/stylesheets/leaflet.rrose.css" />
	<script type="text/javascript" src="http://erictheise.github.io/rrose/javascripts/leaflet.rrose-src.js"></script>

	<!-- This pluggin -->
	<link type="text/css" rel="stylesheet" href="GeoJSON.Ajax.css" />
	<script type="text/javascript" src="GeoJSON.Ajax.js"></script>

	<script type="text/javascript">
		window.addEventListener('load', function() {
			map = new L.Map('map', {
				center: new L.LatLng(46.8, 2),
				zoom: 6,
				layers: [
					new L.TileLayer('http://maps.refuges.info/hiking/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="http://osm.org/copyright">Contributeurs OpenStreetMap</a> & <a href="http://wiki.openstreetmap.org/wiki/Hiking/mri">MRI</a>'
					}),
					new L.GeoJSON.Ajax(
						'http://www.refuges.info/api/polygones', {
							argsGeoJSON: {
								type_polygon: 1
							},
							url: function(target) {
								return target.feature.properties.lien;
							},
							style: function(feature) {
								return {
									color: feature.properties.couleur,
									weight: 2,
									opacity: 0.5
								}
							}
						}
					),
					new L.GeoJSON.Ajax(
						'http://www.refuges.info/api/bbox', {
							argsGeoJSON: {
								type_points: 'all'
							},
							bbox: true,
							degroup: 12,
							url: function(target) {
								return 'http://www.refuges.info/point/' + target.feature.properties.id;
							},
							icon: function(feature) {
								return {
									url: 'http://www.refuges.info/images/icones/' + feature.properties.type.icone + '.png',
									size: 16
								}
							}
						}
					)
				]
			});
		});
	</script>
</head>

<body>
	<p>Leaflet extension for remote GeoJSON layers (Markers, Polylines, Polygons, ...)</p>
	<p>Sources on <a href= "https://github.com/Dominique92/Leaflet.GeoJSON.Ajax">Github: Dominique92/Leaflet.GeoJSON.Ajax</a></p>
	<div id="map" style="width: 800px; height: 600px"></div>
</body>
</html>
