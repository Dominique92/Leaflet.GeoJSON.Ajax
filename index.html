<!DOCTYPE html>
<html>
<head>
	<title>Leaflet extension for remote GeoJSON layers</title>

	<!-- Leaflet kernel -->
	<link rel="icon" type="image/png" href="http://leafletjs.com/docs/images/favicon.png" />
	<!-- TODO ?? link href="http://leafletjs.com/atom.xml" type="application/atom+xml" rel="alternate" title="Leaflet Dev Blog Atom Feed" /-->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>

	<!-- Embeded pluggin -->
	<link rel="stylesheet" href="http://erictheise.github.io/rrose/stylesheets/leaflet.rrose.css" />
	<script type="text/javascript" src="http://erictheise.github.io/rrose/javascripts/rrose-src.js"></script>

	<!-- Embeded pluggin -->
	<link type="text/css" rel="stylesheet" href="GeoJSON.Ajax.css" />
	<script type="text/javascript" src="GeoJSON.Ajax.js"></script>

	<script type="text/javascript">
		window.addEventListener('load', function() {
			map = new L.Map('map', {
				center: new L.LatLng(46.8, 2),
				zoom: 6,
				layers: [
					new L.TileLayer('http://maps.refuges.info/hiking/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="http://osm.org/copyright">Contributeurs OpenStreetMap</a> & <a href="http://wiki.openstreetmap.org/wiki/Hiking/mri">MRI</a>'
					}),
					new L.GeoJSON.Ajax(
						'http://www.refuges.info/api/polygones', {
							argsGeoJSON: {
								type_polygon: 1
							},
							url: function(target) {
								return target.feature.properties.lien;
							},
							style: function(feature) {
								return {
									color: feature.properties.couleur,
									weight: 2,
									opacity: 0.5,
									editSnapable: true
								}
							}
						}
					),
					new L.GeoJSON.Ajax(
						'http://www.refuges.info/api/bbox', {
							argsGeoJSON: {
								type_points: 'all'
							},
							bbox: true,
							degroup: 12,
							url: function(target) {
								return 'http://www.refuges.info/point/' + target.feature.properties.id;
							},
							icon: function(feature) {
								return {
									url: 'http://www.refuges.info/images/icones/' + feature.properties.type.icone + '.png'
								}
							},
							editSnapable: true
						}
					)
				]
			});
		});
	</script>
</head>

<body>
	<p>Leaflet extension for remote GeoJSON layers (Markers, Polylines, Polygons, ...)</p>
	<p>Sources on <a href= "https://github.com/Dominique92/Leaflet.GeoJSON.Ajax">Github: Dominique92/Leaflet.GeoJSON.Ajax</a></p>
	<div id="map" style="width: 800px; height: 600px"></div>
</body>
</html>
